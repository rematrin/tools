<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</title>
  
  <link rel="stylesheet" href="theme.css">

  <link rel="icon" type="image/png" href="percentage.png">
  
  <style>
    /* === –°–¢–ò–õ–ò –≠–¢–û–ô –°–¢–†–ê–ù–ò–¶–´ === */
    /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ theme.css */
    
    :root { 
        --gap: 10px; 
        --pad: 16px; 
    }
    
    .wrap { max-width: 630px; margin: 0 auto; }
    
    h1 { 
        font-size: 1.5rem; 
        margin: 0 0 10px; 
        text-align: center; 
        color: var(--text);
    }

    .card {
      background: var(--card-bg); 
      border: 1px solid var(--border); 
      border-radius: 12px;
      padding: var(--pad); margin-bottom: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
    }

    .card-title {
      font-size: 0.9rem;
      font-weight: 300;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .row {
      display: flex; flex-wrap: wrap;
      align-items: center; gap: var(--gap);
      font-size: 1.1rem; white-space: nowrap;
      overflow: visible; position: relative;
    }

    /* –ë–ê–ó–û–í–´–ï –ò–ù–ü–£–¢–´ */
    input[type="text"] {
      padding: 8px 10px; font-size: 1.05rem;
      border: 1px solid var(--border); 
      border-radius: 8px; 
      background: var(--bg); /* –§–æ–Ω –∏–Ω–ø—É—Ç–∞ —á—É—Ç—å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ */
      color: var(--text);
      flex-shrink: 0;
    }
    input[type="text"]:focus {
      outline: none; border-color: var(--accent); 
      box-shadow: 0 0 0 3px rgba(98, 0, 238, 0.16); /* –¶–≤–µ—Ç —Ç–µ–Ω–∏ –º–æ–∂–Ω–æ –ø–æ–¥—Å—Ç—Ä–æ–∏—Ç—å */
    }

    input[type="time"]{
      width: 90px;
      font-size: 1.1rem;
      text-align: center;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 6px 8px;
      background: var(--bg);
      color: var(--text);
      font-family: inherit;
    }
    input[type="time"]:focus{
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(98, 0, 238, 0.16);
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è Time input (reset) */
    input[type="time"]::-webkit-calendar-picker-indicator { display: none; -webkit-appearance: none; }
    input[type="time"]::-webkit-inner-spin-button,
    input[type="time"]::-webkit-clear-button { display: none; -webkit-appearance: none; }
    input[type="time"] { -moz-appearance: textfield; }

    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è */
    .num { width: 11ch; }
    .num.long { width: 14ch; }
    .date-input { width: 16ch; text-align: center; cursor: pointer; }

    /* –ü–æ–ª–µ —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º */
    .with-suffix { position: relative; }
    .with-suffix input { padding-right: 28px; }
    .with-suffix::after {
      content: attr(data-suffix);
      position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
      color: var(--text-secondary); font-size: .95rem; pointer-events: none;
    }

    .eq { font-weight: 650; color: var(--text); }
    
    .result {
      min-width: 10ch; font-weight: 700; text-align: left;
      padding: 6px 10px; border-radius: 8px;
      background: var(--active-bg); 
      border: 1px solid var(--border);
      color: var(--text);
      flex-grow: 1;
    }
    
    .text { opacity: .9; color: var(--text); font-size: 0.9rem; }
    .hint { margin-top: 10px; font-size: .92rem; color: var(--text-secondary); margin-bottom: 10px; }
    code { background: var(--hover-bg); padding: 2px 6px; border-radius: 6px; color: var(--text); border: 1px solid var(--border); }

    .toggle {
      display: inline-flex; gap: 6px; padding: 4px; border-radius: 7px;
      background: var(--bg); border: 1px solid var(--border);
      flex-shrink: 0; align-items: center;
    }
    .toggle input { display: none; }
    .opt {
      display: inline-flex; align-items: center; justify-content: center;
      width: 30px; height: 30px; border-radius: 10px; cursor: pointer;
      border: 1px solid transparent; 
      background: var(--card-bg); 
      color: var(--text);
      font-weight: 700; user-select: none; font-size: 0.9rem;
    }
    .opt:has(input:checked) { 
        border-color: var(--accent); 
        color: var(--accent);
        background: var(--active-bg);
    }

    .select {
      position: relative; border: 1px solid var(--border); border-radius: 8px;
      background: var(--bg); color: var(--text);
      padding: 8px 32px 8px 10px; font-size: 1.05rem; cursor: pointer; user-select: none;
      min-width: 9ch; flex-shrink: 0;
    }
    .select::after {
      content: "‚ñæ"; position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
      font-size: .9rem; color: var(--text-secondary);
    }
    .options {
      list-style: none; padding: 4px 0; margin: 0;
      background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px;
      position: absolute; z-index: 10; width: 100%;
      box-shadow: 0 2px 6px rgba(0,0,0,.1);
      bottom: 110%;
    }
    .options[hidden] { display: none; }
    .options li { padding: 6px 10px; cursor: pointer; color: var(--text); }
    .options li:hover { background: var(--hover-bg); }

    /* === –ö–ê–õ–ï–ù–î–ê–†–¨ === */
    .calendar {
      position: absolute; bottom: 110%; left: 0;
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,.08);
      padding: 10px; z-index: 30; min-width: 280px;
      opacity: 0; transform: translateY(10px); transition: all 0.2s ease;
      color: var(--text);
    }
    .calendar.show { opacity: 1; transform: translateY(0); }
    
    .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .cal-header span {
      font-weight: 800; cursor: pointer; text-transform: capitalize;
      padding: 4px 8px; border-radius: 6px; transition: background 0.15s;
    }
    .cal-header span:hover { background: var(--hover-bg); }
    .cal-header button {
      border: none; background: var(--bg); color: var(--text);
      border-radius: 8px; width: 32px; height: 32px; cursor: pointer; font-size: 1.1rem;
    }
    .cal-header button:hover { background: var(--hover-bg); }

    .weekday-row {
      display: grid; grid-template-columns: repeat(7, 1fr);
      text-align: center; font-size: 0.85rem; color: var(--text-secondary); margin: 6px 0;
    }
    .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
    .cal-grid div {
      text-align: center; padding: 8px 0; border-radius: 8px; font-size: 0.95rem; cursor: pointer;
    }
    .cal-grid div:hover { background: var(--hover-bg); }
    .cal-grid .today { border: 1px solid var(--accent); background: var(--active-bg); }
    .cal-grid .selected { background: var(--accent); color: #fff; }

    .year-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-top: 4px; }
    .year-grid div { padding: 8px 0; text-align: center; border-radius: 8px; cursor: pointer; }
    .year-grid div:hover { background: var(--hover-bg); }
    .year-grid .selected { background: var(--accent); color: #fff; }

    .calendar .today-btn {
      margin-top: 8px; width: 100%; background: var(--bg); color: var(--text);
      border: 1px solid var(--border); border-radius: 8px; padding: 6px 0;
      font-size: 0.9rem; cursor: pointer;
    }
    .calendar .today-btn:hover { background: var(--hover-bg); }

  </style>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-384FKZ1NQP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-384FKZ1NQP');
  </script>
</head>
<body>

  <script src="theme-loader.js"></script>

  <div id="header-container"></div>

  <div class="wrap">
    <h1>–ü–æ–ª–µ–∑–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</h1>

    <div class="card" id="calcA">
      <div class="card-title">–°–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ —á–∏—Å–ª–æ –æ—Ç –¥—Ä—É–≥–æ–≥–æ</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>15</code> —ç—Ç–æ <code>15%</code> –æ—Ç <code>100</code></div>
      <div class="row">
        <input class="num long" type="text" inputmode="decimal" data-role="x">
        <span class="text">—ç—Ç–æ —Å–∫–æ–ª—å–∫–æ % –æ—Ç</span>
        <input class="num long" type="text" inputmode="decimal" data-role="y">
        <span class="eq">=</span>
        <span class="result" data-role="out">-</span>
      </div>
    </div>

    <div class="card" id="calcB">
      <div class="card-title">–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –æ—Ç —á–∏—Å–ª–∞</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>20%</code> –æ—Ç <code>150</code> —ç—Ç–æ <code>30</code></div>
      <div class="row">
        <div class="with-suffix" data-suffix="%">
          <input class="num" type="text" inputmode="decimal" data-role="n" aria-label="–ü—Ä–æ—Ü–µ–Ω—Ç">
        </div>
        <span class="text">–æ—Ç</span>
        <input class="num long" type="text" inputmode="decimal" data-role="m" aria-label="–ß–∏—Å–ª–æ">
        <span class="eq">=</span>
        <span class="result" data-role="out">-</span>
      </div>
    </div>

    <div class="card" id="calcC">
      <div class="card-title">–ü–ª—é—Å –∏–ª–∏ –º–∏–Ω—É—Å –ø—Ä–æ—Ü–µ–Ω—Ç</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>200 + 10%</code> = <code>220</code></div>
      <div class="row">
        <input class="num long" type="text" inputmode="decimal" data-role="x" aria-label="–ß–∏—Å–ª–æ">
        <div class="toggle" role="radiogroup" aria-label="–û–ø–µ—Ä–∞—Ü–∏—è">
          <label class="opt" title="–ü–ª—é—Å"><input type="radio" name="opC" value="+" checked>‚ûï</label>
          <label class="opt" title="–ú–∏–Ω—É—Å"><input type="radio" name="opC" value="‚àí">‚ûñ</label>
        </div>
        <div class="with-suffix" data-suffix="%">
          <input class="num" type="text" inputmode="decimal" data-role="y" aria-label="–ü—Ä–æ—Ü–µ–Ω—Ç">
        </div>
        <span class="eq">=</span>
        <span class="result" data-role="out">-</span>
      </div>
    </div>

    <div class="card" id="calcD">
      <div class="card-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–∞—Ç—ã</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>01.11.2025 + 2 –º–µ—Å—è—Ü–∞</code> = <code>01.01.2026</code></div>
      <div class="row">
        <div class="date-picker" data-role="date-picker">
          <input class="date-input" type="text" readonly data-role="date-display">
          <div class="calendar" hidden></div>
        </div>
        <div class="toggle" role="radiogroup" aria-label="–û–ø–µ—Ä–∞—Ü–∏—è –¥–∞—Ç—ã">
          <label class="opt"><input type="radio" name="opD" value="+" checked>‚ûï</label>
          <label class="opt"><input type="radio" name="opD" value="-">‚ûñ</label>
        </div>
        <input class="num" type="text" inputmode="decimal" data-role="amount" aria-label="–í–µ–ª–∏—á–∏–Ω–∞">
        <div class="select" data-role="select" aria-haspopup="listbox" aria-expanded="false">
          <span class="selected">–¥–Ω–µ–π</span>
          <ul class="options" hidden role="listbox">
            <li data-value="years">–ª–µ—Ç</li>
            <li data-value="months">–º–µ—Å—è—Ü–µ–≤</li>
            <li data-value="weeks">–Ω–µ–¥–µ–ª—å</li>
            <li data-value="days">–¥–Ω–µ–π</li>
          </ul>
        </div>
        <span class="eq">=</span><span class="result" data-role="out">-</span>
      </div>
    </div>

    <div class="card">
      <div class="card-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–∏</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>12:00 + 05:00</code> = <code>17:00</code></div>
      <div class="row">
        <input type="time" id="time1" value="00:00">
        <div class="toggle">
          <label class="opt"><input type="radio" name="op" value="+" checked><span>‚ûï</span></label>
          <label class="opt"><input type="radio" name="op" value="-"><span>‚ûñ</span></label>
        </div>
        <input type="time" id="time2" value="00:00">
        <span class="result" id="out">-</span>
      </div>
    </div>

  <script>
  // –ü–∞—Ä—Å–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä —á–∏—Å–µ–ª
  const parseNum = v => {
    if (typeof v !== 'string') return NaN;
    v = v.replace(/\s+/g, '').replace(',', '.').trim();
    return v ? +v : NaN;
  };

  const fmtNum = n => {
    if (!isFinite(n)) return '-';
    const parts = (Math.round(n * 100) / 100).toString().split('.');
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
    return parts.join('.');
  };

  // === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† A ===
  (() => {
    const r = document.getElementById('calcA');
    const x = r.querySelector('[data-role="x"]');
    const y = r.querySelector('[data-role="y"]');
    const o = r.querySelector('[data-role="out"]');
    const f = () => {
      const xv = parseNum(x.value), yv = parseNum(y.value);
      o.textContent = isFinite(xv) && isFinite(yv) && yv !== 0 ? fmtNum((xv / yv) * 100) + ' %' : '-';
    };
    x.oninput = y.oninput = f;
  })();

  // === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† B ===
  (() => {
    const r = document.getElementById('calcB');
    const n = r.querySelector('[data-role="n"]');
    const m = r.querySelector('[data-role="m"]');
    const o = r.querySelector('[data-role="out"]');
    const f = () => {
      const nv = parseNum(n.value), mv = parseNum(m.value);
      o.textContent = isFinite(nv) && isFinite(mv) ? fmtNum((nv / 100) * mv) : '-';
    };
    n.oninput = m.oninput = f;
  })();

  // === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† C ===
  (() => {
    const r = document.getElementById('calcC');
    const x = r.querySelector('[data-role="x"]');
    const y = r.querySelector('[data-role="y"]');
    const o = r.querySelector('[data-role="out"]');
    const ops = r.querySelectorAll('input[name="opC"]');
    const f = () => {
      const xv = parseNum(x.value), yv = parseNum(y.value);
      if (!isFinite(xv) || !isFinite(yv)) return (o.textContent = '-');
      const op = [...ops].find(v => v.checked)?.value;
      const res = op === '+' ? xv + (xv * yv / 100) : xv - (xv * yv / 100);
      o.textContent = fmtNum(res);
    };
    x.oninput = y.oninput = f;
    ops.forEach(v => v.onchange = f);
  })();

  // === –ö–ê–õ–ï–ù–î–ê–†–¨ / –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† D ===
  (() => {
    const r = document.getElementById('calcD'), o = r.querySelector('[data-role="out"]'),
          a = r.querySelector('[data-role="amount"]'), ops = r.querySelectorAll('input[name="opD"]');

    const sel = r.querySelector('[data-role="select"]'),
          selText = sel.querySelector('.selected'),
          opts = sel.querySelector('.options');
    let unit = 'days';
    sel.onclick = e => {
      if (e.target.tagName === 'LI') {
        unit = e.target.dataset.value;
        selText.textContent = e.target.textContent;
        opts.hidden = true;
        sel.setAttribute('aria-expanded', 'false');
        recompute();
      } else {
        opts.hidden = !opts.hidden;
        sel.setAttribute('aria-expanded', String(!opts.hidden));
      }
      e.stopPropagation();
    };
    document.addEventListener('pointerdown', e => { if (!sel.contains(e.target)) { opts.hidden = true; sel.setAttribute('aria-expanded','false'); } });

    const dp = r.querySelector('[data-role="date-picker"]'),
          display = dp.querySelector('[data-role="date-display"]'),
          cal = dp.querySelector('.calendar');
    let base = new Date(), mode = 'days';
    display.value = fmt(base);

    function fmt(d){
      return `${String(d.getDate()).padStart(2,'0')}.${String(d.getMonth()+1).padStart(2,'0')}.${d.getFullYear()}`;
    }

    function render(vd){
      cal.innerHTML = '';
      const h = document.createElement('div'); h.className = 'cal-header';
      const mName = vd.toLocaleString('ru-RU',{month:'long'}), yNum = vd.getFullYear();
      const p = document.createElement('button'); p.textContent = '‚Äπ';
      const n = document.createElement('button'); n.textContent = '‚Ä∫';
      const t = document.createElement('span'); t.textContent = `${mName} ${yNum}`;
      h.append(p,t,n); cal.append(h);

      p.onclick = e => { e.stopPropagation(); if (mode==='days') vd.setMonth(vd.getMonth()-1); else vd.setFullYear(vd.getFullYear()-12); render(vd); };
      n.onclick = e => { e.stopPropagation(); if (mode==='days') vd.setMonth(vd.getMonth()+1); else vd.setFullYear(vd.getFullYear()+12); render(vd); };
      t.onclick = e => { e.stopPropagation(); mode = (mode==='days'?'years':'days'); render(vd); };

      if (mode === 'days') {
        const w = document.createElement('div'); w.className='weekday-row';
        ['–ü–Ω','–í—Ç','–°—Ä','–ß—Ç','–ü—Ç','–°–±','–í—Å'].forEach(nm => { const d=document.createElement('div'); d.textContent=nm; w.append(d);});
        cal.append(w);

        const g = document.createElement('div'); g.className='cal-grid'; cal.append(g);
        const y = vd.getFullYear(), m = vd.getMonth(),
              first = (new Date(y,m,1).getDay()||7)-1, days = new Date(y,m+1,0).getDate();
        for (let i=0;i<first;i++) g.append(document.createElement('div'));
        for (let d=1; d<=days; d++){
          const cell=document.createElement('div'); cell.textContent=d; const curr=new Date(y,m,d);
          if (curr.toDateString()===new Date().toDateString()) cell.classList.add('today');
          if (curr.toDateString()===base.toDateString()) cell.classList.add('selected');
          cell.onclick=e=>{e.stopPropagation(); base=curr; display.value=fmt(base); cal.hidden=true; cal.classList.remove('show'); recompute();};
          g.append(cell);
        }
      } else {
        const start = Math.floor(yNum/12)*12;
        const g = document.createElement('div'); g.className='year-grid'; cal.append(g);
        for (let y=start; y<start+12; y++){
          const cell=document.createElement('div'); cell.textContent=y;
          if (y===yNum) cell.classList.add('selected');
          cell.onclick=e=>{e.stopPropagation(); vd.setFullYear(y); mode='days'; render(vd); };
          g.append(cell);
        }
      }

      const todayBtn=document.createElement('button'); todayBtn.className='today-btn'; todayBtn.textContent='–°–µ–≥–æ–¥–Ω—è';
      todayBtn.onclick=e=>{e.stopPropagation(); base=new Date(); display.value=fmt(base); cal.hidden=true; cal.classList.remove('show'); recompute();};
      cal.append(todayBtn);
    }

    display.onclick = e => {
      e.stopPropagation();
      mode='days';
      cal.hidden = !cal.hidden;
      if (!cal.hidden) { render(new Date(base)); setTimeout(()=>cal.classList.add('show'), 10); }
      else cal.classList.remove('show');
    };
    document.addEventListener('pointerdown', e => { if (!dp.contains(e.target)) { cal.hidden = true; cal.classList.remove('show'); } });

    function recompute(){
      const v = +a.value.replace(',', '.');
      if (!isFinite(v) || v <= 0) return o.textContent='-';
      const op = [...ops].find(o => o.checked)?.value || '+';
      const dir = op === '+' ? 1 : -1;
      const res = new Date(base);
      switch (unit) {
        case 'days':   res.setDate(res.getDate() + dir*v); break;
        case 'weeks':  res.setDate(res.getDate() + dir*v*7); break;
        case 'months': res.setMonth(res.getMonth() + dir*v); break;
        case 'years':  res.setFullYear(res.getFullYear() + dir*v); break;
      }
      o.textContent = fmt(res);
    }
    a.oninput = recompute; ops.forEach(o => o.onchange = recompute);
  })();

  // === –§–ò–õ–¨–¢–†: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, —Ç–æ—á–∫–∞ –∏ –∑–∞–ø—è—Ç–∞—è –≤–æ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—è—Ö ===
  document.querySelectorAll('input[type="text"]').forEach(i => {
    if (!i.hasAttribute('readonly')) i.setAttribute('inputmode','decimal'); // —Ü–∏—Ñ—Ä–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
    i.addEventListener('input', () => { i.value = i.value.replace(/[^0-9.,]/g, ''); });
  });
    
  // === –ê–≤—Ç–æ—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç—ã—Å—è—á –ø—Ä–∏ –≤–≤–æ–¥–µ ===
  document.querySelectorAll('input[type="text"]').forEach(i => {
    if (!i.hasAttribute('readonly')) {
      i.setAttribute('inputmode', 'decimal');
      i.addEventListener('input', e => {
        const oldValue = i.getAttribute('data-old') || '';
        const oldPos = i.selectionStart || 0;
        let clean = i.value.replace(/[^0-9.,]/g, '');
        clean = clean.replace(',', '.');
        let [intPart, decPart] = clean.split('.');
        const formattedInt = intPart ? intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') : '';
        const formatted = decPart !== undefined ? `${formattedInt}.${decPart}` : formattedInt;
        const diff = formatted.length - i.value.length;
        i.value = formatted;
        i.setAttribute('data-old', formatted);
        let newPos = oldPos + diff;
        if (newPos < 0) newPos = 0;
        if (newPos > i.value.length) newPos = i.value.length;
        i.setSelectionRange(newPos, newPos);
      });
      i.addEventListener('focus', () => i.setAttribute('data-old', i.value));
    }
  });

  const t1=document.getElementById('time1');
  const t2=document.getElementById('time2');
  const out=document.getElementById('out');
  const ops=document.querySelectorAll('input[name="op"]');

  function parseTime(v){
    if(!v)return null;
    const[h,m]=v.split(':').map(Number);
    return h*60+m;
  }
  function fmtTime(mins){
    let day=0;
    if(mins>=1440){mins-=1440;day++;}
    if(mins<0){mins+=1440;day--;}
    const h=String(Math.floor(mins/60)).padStart(2,'0');
    const m=String(mins%60).padStart(2,'0');
    return `${h}:${m}${day!==0?` <span class='small'>(${day>0?'+':'‚àí'}${Math.abs(day)})</span>`:''}`;
  }
  function recompute(){
    const op=[...ops].find(x=>x.checked).value;
    const a=parseTime(t1.value);
    const b=parseTime(t2.value);
    if(a==null||b==null)return out.textContent='-';
    const res=op==='+'?a+b:a-b;
    out.innerHTML=fmtTime(res);
  }
  [t1,t2].forEach(i=>i.addEventListener('input',recompute));
  ops.forEach(o=>o.onchange=recompute);
  </script>
  </div> <link rel="stylesheet" href="footer.css">
  <div id="footer"></div>
  <script>
    fetch('footer.html')
      .then(r => r.text())
      .then(html => document.getElementById('footer').innerHTML = html);
  </script>

  <link rel="stylesheet" href="auth-widget.css">
  <script type="module" src="nav-widget.js"></script> 
  <script type="module" src="auth-widget.js"></script>
  <script type="module" src="header.js"></script>
</body>
</html>