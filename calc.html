<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</title>
  <link rel="icon" type="image/png" href="percentage.png">
  <style>
    :root { --gap: 10px; --pad: 16px; }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      margin: 0; padding: 28px 18px;
      line-height: 1.45;
      background: #f6f7fb; color: #0c0c0d;
    }
    .wrap { max-width: 630px; margin: 0 auto; }
    h1 { font-size: 1.5rem; margin: 0 0 10px; text-align: center; }

    .card {
      background: #fff; border: 1px solid #e5e7ef; border-radius: 12px;
      padding: var(--pad); margin-bottom: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
    }

    .card-title {
      font-size: 0.9rem;
      font-weight: 300;
      color: #666;
      margin-bottom: 8px;
    }

    .row {
      display: flex; flex-wrap: wrap;
      align-items: center; gap: var(--gap);
      font-size: 1.1rem; white-space: nowrap;
      overflow: visible; position: relative;
    }

    /* –ë–ê–ó–û–í–´–ï –ò–ù–ü–£–¢–´ */
    input[type="text"] {
      padding: 8px 10px; font-size: 1.05rem;
      border: 1px solid #cfd5e1; border-radius: 8px; background: #fff;
      flex-shrink: 0;
    }
    input[type="text"]:focus {
      outline: none; border-color: #7aa2ff; box-shadow: 0 0 0 3px rgba(122,162,255,.16);
    }
  input[type="time"]{
    width:90px;
    font-size:1.1rem;
    text-align:center;
    border:1px solid #cfd5e1;
    border-radius:8px;
    padding:6px 8px;
    background:#fff;
    font-family:inherit;
  }
  input[type="time"]:focus{
    outline:none;
    border-color:#7aa2ff;
    box-shadow:0 0 0 3px rgba(122,162,255,.16);
  }
     /* —É–±–∏—Ä–∞–µ–º –∏–∫–æ–Ω–∫—É —á–∞—Å–æ–≤ –∏ —Å—Ç—Ä–µ–ª–∫–∏ —É input[type=time] */
  input[type="time"]::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
  }

  input[type="time"]::-webkit-inner-spin-button,
  input[type="time"]::-webkit-clear-button {
    display: none;
    -webkit-appearance: none;
  }

  input[type="time"] {
    -moz-appearance: textfield; /* –¥–ª—è Firefox */
  }

    /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è */
    .num { width: 11ch; }            /* –∫–æ—Ä–æ—Ç–∫–∏–µ —á–∏—Å–ª–∞/–ø—Ä–æ—Ü–µ–Ω—Ç—ã */
    .num.long { width: 14ch; }       /* —á—É—Ç–∫–∞ –¥–ª–∏–Ω–Ω–µ–µ –¥–ª—è ‚Äú–±–æ–ª—å—à–∏—Ö‚Äù —á–∏—Å–µ–ª */
    .date-input { width: 16ch; text-align: center; cursor: pointer; }

    footer{margin-top:28px;text-align:center;font-size:.95rem;color:#555}
    footer a{color:#a7a9ae;text-decoration:none;margin:0 6px}
    footer a:hover{text-decoration:underline}
    footer span{color:#aaa}
    
    /* –ü–æ–ª–µ —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, %) */
    .with-suffix { position: relative; }
    .with-suffix input { padding-right: 28px; }
    .with-suffix::after {
      content: attr(data-suffix);
      position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
      color: #666; font-size: .95rem; pointer-events: none;
    }

    .eq { font-weight: 650; }
    .result {
      min-width: 10ch; font-weight: 700; text-align: left;
      padding: 6px 10px; border-radius: 8px;
      background: #f1f4ff; border: 1px solid #dbe5ff;
      flex-grow: 1;
    }
    .text { opacity: .9; }
    .hint { margin-top: 10px; font-size: .92rem; color: #505866; margin-bottom: 10px; }
    code { background: #eef2ff; padding: 2px 6px; border-radius: 6px; }

    .toggle {
      display: inline-flex; gap: 6px; padding: 4px; border-radius: 7px;
      background: #eef2ff; border: 1px solid #dbe5ff;
      flex-shrink: 0;
      align-items: center; /* –¥–æ–±–∞–≤–ª–µ–Ω–æ */
    }
    .toggle input { display: none; }
    .opt {
      display: inline-flex; align-items: center; justify-content: center;
      width: 30px; height: 30px; border-radius: 10px; cursor: pointer;
      border: 1px solid #cfd5e1; background: #fff; font-weight: 700;
      user-select: none; font-size: 0.9rem;;
    }
    .opt:has(input:checked) { border-color: #7aa2ff; box-shadow: 0 0 0 3px rgba(122,162,255,.16); }

    .select {
      position: relative; border: 1px solid #cfd5e1; border-radius: 8px;
      background: #fff; padding: 8px 32px 8px 10px; font-size: 1.05rem; cursor: pointer; user-select: none;
      min-width: 9ch; flex-shrink: 0;
    }
    .select::after {
      content: "‚ñæ"; position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
      font-size: .9rem; color: #777;
    }
    .options {
      list-style: none; padding: 4px 0; margin: 0;
      background: #fff; border: 1px solid #cfd5e1; border-radius: 8px;
      position: absolute; z-index: 10; width: 100%;
      box-shadow: 0 2px 6px rgba(0,0,0,.1);
      bottom: 110%;
    }
    .options[hidden] { display: none; }
    .options li { padding: 6px 10px; cursor: pointer; }
    .options li:hover { background: #eef2ff; }

    /* === –ö–ê–õ–ï–ù–î–ê–†–¨ === */
    .calendar {
      position: absolute;
      bottom: 110%;
      left: 0;
      background: #fff;
      border: 1px solid #cfd5e1;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,.08);
      padding: 10px;
      z-index: 30;
      min-width: 280px;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.2s ease;
    }
    .calendar.show { opacity: 1; transform: translateY(0); }
    .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .cal-header span {
      font-weight: 800;
      cursor: pointer;
      text-transform: capitalize;
      padding: 4px 8px;
      border-radius: 6px;
      transition: background 0.15s;
    }
    .cal-header span:hover { background: #eef2ff; }
    .cal-header button {
      border: none; background: #eef2ff; color: #333;
      border-radius: 8px; width: 32px; height: 32px; cursor: pointer; font-size: 1.1rem;
    }
    .cal-header button:hover { background: #dbe5ff; }

    .weekday-row {
      display: grid; grid-template-columns: repeat(7, 1fr);
      text-align: center; font-size: 0.85rem; color: #777; margin: 6px 0;
    }
    .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
    .cal-grid div {
      text-align: center; padding: 8px 0; border-radius: 8px; font-size: 0.95rem; cursor: pointer;
    }
    .cal-grid div:hover { background: #eef2ff; }
    .cal-grid .today { border: 1px solid #7aa2ff; background: #f1f4ff; }
    .cal-grid .selected { background: #7aa2ff; color: #fff; }

    .year-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-top: 4px; }
    .year-grid div { padding: 8px 0; text-align: center; border-radius: 8px; cursor: pointer; }
    .year-grid div:hover { background: #eef2ff; }
    .year-grid .selected { background: #7aa2ff; color: #fff; }

    .calendar .today-btn {
      margin-top: 8px; width: 100%; background: #eef2ff;
      border: 1px solid #dbe5ff; border-radius: 8px; padding: 6px 0;
      font-size: 0.9rem; cursor: pointer;
    }
    .calendar .today-btn:hover { background: #dbe5ff; }

    .text {
  font-size: 0.9rem; /* –º–æ–∂–Ω–æ 0.85rem –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –µ—â—ë –º–µ–Ω—å—à–µ */
  opacity: 0.85;
}

  </style>
      <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-384FKZ1NQP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-384FKZ1NQP');
</script>
</head>
<body>
  <div class="wrap">
    <h1>–ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</h1>

    <!-- A: –°–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ —á–∏—Å–ª–æ –æ—Ç –¥—Ä—É–≥–æ–≥–æ -->
    <div class="card" id="calcA">
      <div class="card-title">–°–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ —á–∏—Å–ª–æ –æ—Ç –¥—Ä—É–≥–æ–≥–æ</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>15</code> —ç—Ç–æ <code>15%</code> –æ—Ç <code>100</code></div>
      <div class="row">
        <input class="num long" type="text" inputmode="decimal" data-role="x">
        <span class="text">—ç—Ç–æ —Å–∫–æ–ª—å–∫–æ % –æ—Ç</span>
        <input class="num long" type="text" inputmode="decimal" data-role="y">
        <span class="eq">=</span>
        <span class="result" data-role="out">-</span>
      </div>
    </div>

    <!-- B: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –æ—Ç —á–∏—Å–ª–∞ -->
    <div class="card" id="calcB">
      <div class="card-title">–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –æ—Ç —á–∏—Å–ª–∞</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>20%</code> –æ—Ç <code>150</code> —ç—Ç–æ <code>30</code></div>
      <div class="row">
        <div class="with-suffix" data-suffix="%">
          <input class="num" type="text" inputmode="decimal" data-role="n" aria-label="–ü—Ä–æ—Ü–µ–Ω—Ç">
        </div>
        <span class="text">–æ—Ç</span>
        <input class="num long" type="text" inputmode="decimal" data-role="m" aria-label="–ß–∏—Å–ª–æ">
        <span class="eq">=</span>
        <span class="result" data-role="out">-</span>
      </div>
    </div>

    <!-- C: –ü–ª—é—Å/–º–∏–Ω—É—Å –ø—Ä–æ—Ü–µ–Ω—Ç -->
    <div class="card" id="calcC">
      <div class="card-title">–ü–ª—é—Å –∏–ª–∏ –º–∏–Ω—É—Å –ø—Ä–æ—Ü–µ–Ω—Ç</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>200 + 10%</code> = <code>220</code></div>
      <div class="row">
        <input class="num long" type="text" inputmode="decimal" data-role="x" aria-label="–ß–∏—Å–ª–æ">
        <div class="toggle" role="radiogroup" aria-label="–û–ø–µ—Ä–∞—Ü–∏—è">
          <label class="opt" title="–ü–ª—é—Å"><input type="radio" name="opC" value="+" checked>‚ûï</label>
          <label class="opt" title="–ú–∏–Ω—É—Å"><input type="radio" name="opC" value="‚àí">‚ûñ</label>
        </div>
        <div class="with-suffix" data-suffix="%">
          <input class="num" type="text" inputmode="decimal" data-role="y" aria-label="–ü—Ä–æ—Ü–µ–Ω—Ç">
        </div>
        <span class="eq">=</span>
        <span class="result" data-role="out">-</span>
      </div>
    </div>

    <!-- D: –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
    <div class="card" id="calcD">
      <div class="card-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–∞—Ç—ã</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>01.11.2025 + 2 –º–µ—Å—è—Ü–∞</code> = <code>01.01.2026</code></div>
      <div class="row">
        <div class="date-picker" data-role="date-picker">
          <input class="date-input" type="text" readonly data-role="date-display">
          <div class="calendar" hidden></div>
        </div>
        <div class="toggle" role="radiogroup" aria-label="–û–ø–µ—Ä–∞—Ü–∏—è –¥–∞—Ç—ã">
          <label class="opt"><input type="radio" name="opD" value="+" checked>‚ûï</label>
          <label class="opt"><input type="radio" name="opD" value="-">‚ûñ</label>
        </div>
        <input class="num" type="text" inputmode="decimal" data-role="amount" aria-label="–í–µ–ª–∏—á–∏–Ω–∞">
        <div class="select" data-role="select" aria-haspopup="listbox" aria-expanded="false">
          <span class="selected">–¥–Ω–µ–π</span>
          <ul class="options" hidden role="listbox">
            <li data-value="years">–ª–µ—Ç</li>
            <li data-value="months">–º–µ—Å—è—Ü–µ–≤</li>
            <li data-value="weeks">–Ω–µ–¥–µ–ª—å</li>
            <li data-value="days">–¥–Ω–µ–π</li>
          </ul>
        </div>
        <span class="eq">=</span><span class="result" data-role="out">-</span>
      </div>
    </div>
    <div class="card">
    <div class="card-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–∏</div>
      <div class="hint">üí° –ü—Ä–∏–º–µ—Ä: <code>12:00 + 05:00</code> = <code>17:00</code></div>
    <div class="row">
      <input type="time" id="time1" value="00:00">
      <div class="toggle">
        <label class="opt"><input type="radio" name="op" value="+" checked><span>‚ûï</span></label>
        <label class="opt"><input type="radio" name="op" value="-"><span>‚ûñ</span></label>
      </div>
      <input type="time" id="time2" value="00:00">
      <span class="result" id="out">-</span>
    </div>
  </div>

  <script>
  // –ü–∞—Ä—Å–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä —á–∏—Å–µ–ª
  const parseNum = v => {
  if (typeof v !== 'string') return NaN;
  // —É–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã, –∑–∞–º–µ–Ω—è–µ–º –∑–∞–ø—è—Ç—É—é –Ω–∞ —Ç–æ—á–∫—É
  v = v.replace(/\s+/g, '').replace(',', '.').trim();
  return v ? +v : NaN;
};

  const fmtNum = n => {
  if (!isFinite(n)) return '-';
  // –æ–∫—Ä—É–≥–ª—è–µ–º –¥–æ –¥–≤—É—Ö –∑–Ω–∞–∫–æ–≤
  const parts = (Math.round(n * 100) / 100).toString().split('.');
  // –¥–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–±–µ–ª—ã –≤ —Ü–µ–ª–æ–π —á–∞—Å—Ç–∏
  parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
  return parts.join('.');
};

  // === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† A ===
  (() => {
    const r = document.getElementById('calcA');
    const x = r.querySelector('[data-role="x"]');
    const y = r.querySelector('[data-role="y"]');
    const o = r.querySelector('[data-role="out"]');
    const f = () => {
      const xv = parseNum(x.value), yv = parseNum(y.value);
      o.textContent = isFinite(xv) && isFinite(yv) && yv !== 0 ? fmtNum((xv / yv) * 100) + ' %' : '-';
    };
    x.oninput = y.oninput = f;
  })();

  // === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† B ===
  (() => {
    const r = document.getElementById('calcB');
    const n = r.querySelector('[data-role="n"]');
    const m = r.querySelector('[data-role="m"]');
    const o = r.querySelector('[data-role="out"]');
    const f = () => {
      const nv = parseNum(n.value), mv = parseNum(m.value);
      o.textContent = isFinite(nv) && isFinite(mv) ? fmtNum((nv / 100) * mv) : '-';
    };
    n.oninput = m.oninput = f;
  })();

  // === –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† C ===
  (() => {
    const r = document.getElementById('calcC');
    const x = r.querySelector('[data-role="x"]');
    const y = r.querySelector('[data-role="y"]');
    const o = r.querySelector('[data-role="out"]');
    const ops = r.querySelectorAll('input[name="opC"]');
    const f = () => {
      const xv = parseNum(x.value), yv = parseNum(y.value);
      if (!isFinite(xv) || !isFinite(yv)) return (o.textContent = '-');
      const op = [...ops].find(v => v.checked)?.value;
      const res = op === '+' ? xv + (xv * yv / 100) : xv - (xv * yv / 100);
      o.textContent = fmtNum(res);
    };
    x.oninput = y.oninput = f;
    ops.forEach(v => v.onchange = f);
  })();

  // === –ö–ê–õ–ï–ù–î–ê–†–¨ / –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† D ===
  (() => {
    const r = document.getElementById('calcD'), o = r.querySelector('[data-role="out"]'),
          a = r.querySelector('[data-role="amount"]'), ops = r.querySelectorAll('input[name="opD"]');

    const sel = r.querySelector('[data-role="select"]'),
          selText = sel.querySelector('.selected'),
          opts = sel.querySelector('.options');
    let unit = 'days';
    sel.onclick = e => {
      if (e.target.tagName === 'LI') {
        unit = e.target.dataset.value;
        selText.textContent = e.target.textContent;
        opts.hidden = true;
        sel.setAttribute('aria-expanded', 'false');
        recompute();
      } else {
        opts.hidden = !opts.hidden;
        sel.setAttribute('aria-expanded', String(!opts.hidden));
      }
      e.stopPropagation();
    };
    document.addEventListener('pointerdown', e => { if (!sel.contains(e.target)) { opts.hidden = true; sel.setAttribute('aria-expanded','false'); } });

    const dp = r.querySelector('[data-role="date-picker"]'),
          display = dp.querySelector('[data-role="date-display"]'),
          cal = dp.querySelector('.calendar');
    let base = new Date(), mode = 'days';
    display.value = fmt(base);

    function fmt(d){
      return `${String(d.getDate()).padStart(2,'0')}.${String(d.getMonth()+1).padStart(2,'0')}.${d.getFullYear()}`;
    }

    function render(vd){
      cal.innerHTML = '';
      const h = document.createElement('div'); h.className = 'cal-header';
      const mName = vd.toLocaleString('ru-RU',{month:'long'}), yNum = vd.getFullYear();
      const p = document.createElement('button'); p.textContent = '‚Äπ';
      const n = document.createElement('button'); n.textContent = '‚Ä∫';
      const t = document.createElement('span'); t.textContent = `${mName} ${yNum}`;
      h.append(p,t,n); cal.append(h);

      p.onclick = e => { e.stopPropagation(); if (mode==='days') vd.setMonth(vd.getMonth()-1); else vd.setFullYear(vd.getFullYear()-12); render(vd); };
      n.onclick = e => { e.stopPropagation(); if (mode==='days') vd.setMonth(vd.getMonth()+1); else vd.setFullYear(vd.getFullYear()+12); render(vd); };
      t.onclick = e => { e.stopPropagation(); mode = (mode==='days'?'years':'days'); render(vd); };

      if (mode === 'days') {
        const w = document.createElement('div'); w.className='weekday-row';
        ['–ü–Ω','–í—Ç','–°—Ä','–ß—Ç','–ü—Ç','–°–±','–í—Å'].forEach(nm => { const d=document.createElement('div'); d.textContent=nm; w.append(d);});
        cal.append(w);

        const g = document.createElement('div'); g.className='cal-grid'; cal.append(g);
        const y = vd.getFullYear(), m = vd.getMonth(),
              first = (new Date(y,m,1).getDay()||7)-1, days = new Date(y,m+1,0).getDate();
        for (let i=0;i<first;i++) g.append(document.createElement('div'));
        for (let d=1; d<=days; d++){
          const cell=document.createElement('div'); cell.textContent=d; const curr=new Date(y,m,d);
          if (curr.toDateString()===new Date().toDateString()) cell.classList.add('today');
          if (curr.toDateString()===base.toDateString()) cell.classList.add('selected');
          cell.onclick=e=>{e.stopPropagation(); base=curr; display.value=fmt(base); cal.hidden=true; cal.classList.remove('show'); recompute();};
          g.append(cell);
        }
      } else {
        const start = Math.floor(yNum/12)*12;
        const g = document.createElement('div'); g.className='year-grid'; cal.append(g);
        for (let y=start; y<start+12; y++){
          const cell=document.createElement('div'); cell.textContent=y;
          if (y===yNum) cell.classList.add('selected');
          cell.onclick=e=>{e.stopPropagation(); vd.setFullYear(y); mode='days'; render(vd); };
          g.append(cell);
        }
      }

      const todayBtn=document.createElement('button'); todayBtn.className='today-btn'; todayBtn.textContent='–°–µ–≥–æ–¥–Ω—è';
      todayBtn.onclick=e=>{e.stopPropagation(); base=new Date(); display.value=fmt(base); cal.hidden=true; cal.classList.remove('show'); recompute();};
      cal.append(todayBtn);
    }

    display.onclick = e => {
      e.stopPropagation();
      mode='days';
      cal.hidden = !cal.hidden;
      if (!cal.hidden) { render(new Date(base)); setTimeout(()=>cal.classList.add('show'), 10); }
      else cal.classList.remove('show');
    };
    document.addEventListener('pointerdown', e => { if (!dp.contains(e.target)) { cal.hidden = true; cal.classList.remove('show'); } });

    function recompute(){
      const v = +a.value.replace(',', '.');
      if (!isFinite(v) || v <= 0) return o.textContent='-';
      const op = [...ops].find(o => o.checked)?.value || '+';
      const dir = op === '+' ? 1 : -1;
      const res = new Date(base);
      switch (unit) {
        case 'days':   res.setDate(res.getDate() + dir*v); break;
        case 'weeks':  res.setDate(res.getDate() + dir*v*7); break;
        case 'months': res.setMonth(res.getMonth() + dir*v); break;
        case 'years':  res.setFullYear(res.getFullYear() + dir*v); break;
      }
      o.textContent = fmt(res);
    }
    a.oninput = recompute; ops.forEach(o => o.onchange = recompute);
  })();

  // === –§–ò–õ–¨–¢–†: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, —Ç–æ—á–∫–∞ –∏ –∑–∞–ø—è—Ç–∞—è –≤–æ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—è—Ö ===
  document.querySelectorAll('input[type="text"]').forEach(i => {
    if (!i.hasAttribute('readonly')) i.setAttribute('inputmode','decimal'); // —Ü–∏—Ñ—Ä–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
    i.addEventListener('input', () => { i.value = i.value.replace(/[^0-9.,]/g, ''); });
  });
    
// === –ê–≤—Ç–æ—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç—ã—Å—è—á –ø—Ä–∏ –≤–≤–æ–¥–µ (–±–µ–∑ –ø—Ä—ã–∂–∫–æ–≤ –∫—É—Ä—Å–æ—Ä–∞, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–æ—á–∫–∏/–∑–∞–ø—è—Ç–æ–π) ===
document.querySelectorAll('input[type="text"]').forEach(i => {
  if (!i.hasAttribute('readonly')) {
    i.setAttribute('inputmode', 'decimal');

    i.addEventListener('input', e => {
      const oldValue = i.getAttribute('data-old') || '';
      const oldPos = i.selectionStart || 0;

      // –æ—á–∏—â–∞–µ–º –≤–≤–æ–¥ –æ—Ç –≤—Å–µ–≥–æ, –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä, —Ç–æ—á–∫–∏ –∏ –∑–∞–ø—è—Ç–æ–π
      let clean = i.value.replace(/[^0-9.,]/g, '');
      clean = clean.replace(',', '.');

      // —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏
      let [intPart, decPart] = clean.split('.');

      // —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ü–µ–ª—É—é —á–∞—Å—Ç—å
      const formattedInt = intPart ? intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') : '';
      const formatted = decPart !== undefined ? `${formattedInt}.${decPart}` : formattedInt;

      // –≤—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É –¥–ª–∏–Ω—ã –¥–æ –∏ –ø–æ—Å–ª–µ
      const diff = formatted.length - i.value.length;

      // –æ–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–µ
      i.value = formatted;
      i.setAttribute('data-old', formatted);

      // –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫—É—Ä—Å–æ—Ä
      let newPos = oldPos + diff;
      if (newPos < 0) newPos = 0;
      if (newPos > i.value.length) newPos = i.value.length;
      i.setSelectionRange(newPos, newPos);
    });

    // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
    i.addEventListener('focus', () => i.setAttribute('data-old', i.value));
  }
});
const t1=document.getElementById('time1');
const t2=document.getElementById('time2');
const out=document.getElementById('out');
const ops=document.querySelectorAll('input[name="op"]');

function parseTime(v){
  if(!v)return null;
  const[h,m]=v.split(':').map(Number);
  return h*60+m;
}
function fmtTime(mins){
  let day=0;
  if(mins>=1440){mins-=1440;day++;}
  if(mins<0){mins+=1440;day--;}
  const h=String(Math.floor(mins/60)).padStart(2,'0');
  const m=String(mins%60).padStart(2,'0');
  return `${h}:${m}${day!==0?` <span class='small'>(${day>0?'+':'‚àí'}${Math.abs(day)})</span>`:''}`;
}
function recompute(){
  const op=[...ops].find(x=>x.checked).value;
  const a=parseTime(t1.value);
  const b=parseTime(t2.value);
  if(a==null||b==null)return out.textContent='-';
  const res=op==='+'?a+b:a-b;
  out.innerHTML=fmtTime(res);
}
[t1,t2].forEach(i=>i.addEventListener('input',recompute));
ops.forEach(o=>o.onchange=recompute);
  </script>
    <link rel="stylesheet" href="footer.css">
<div id="footer"></div>
<script>
fetch('footer.html')
  .then(r => r.text())
  .then(html => document.getElementById('footer').innerHTML = html);
</script>
</body>
</html>
